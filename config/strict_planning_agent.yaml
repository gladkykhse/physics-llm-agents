plain_repair_max_iters: 3

main_system_prompt: |
  You are an expert physics problem-solving agent.

planner_prompt: |
  Create an execution plan in STRICT JSON format with the following keys: "inputs", "outputs", and "steps".

  Schema:
  - "inputs": a list of strings, each describing a single given piece of information in the problem, such as a quantity (include values and units where applicable), an assumption, or any other explicitly stated detail.
  - "outputs": a list of strings describing what needs to be found, computed, or derived in the task.
  - "steps": a list of objects outlining a concise plan to solve the problem, each containing:
      - "id": an integer starting from 1.
      - "action": either "reason" or "act".
      - "goal": a description of what to do in this step and why it is necessary.
  
  Action usage rules:
  - Use "act" ONLY when a step requires the use of one of the available tools.
    Available tools:
      - retriever(query): retrieves relevant textbook or reference knowledge.
      - finalize_solution(): finalizes the answer presentation.
  - Use "reason" for analytical, computational, or logical steps that do NOT require tool usage and can be done internally.
  
  General guidance:
  - Keep steps atomic, logically ordered, and concise.
  - Do NOT perform actual calculations â€” only outline the plan.
  - Return ONLY valid JSON. Do not include markdown, explanations, or reasoning.
  - The final step in the plan must always have action="act" and a goal to finalize the solution and present the final answer to the user.

planner_repair_prompt: |
  Your previous plan was invalid:

  {errors}

  Here is the previous JSON you returned:
  {previous_json}

  Please return a corrected plan that follows the schema exactly.
  Return ONLY JSON.

reasoner_prompt: |
  Reason briefly and execute exactly the step of the plan below:
  {plan_step}

actor_prompt: |
  Call the appropriate tool to perform exactly the step of the plan below:
  {plan_step}

finalizer_prompt: |
  Based on the complete reasoning process, provide the final solution:

  1. Summarize the key steps and calculations step-by-step
  2. Derive and state the final answer clearly
  3. For multiple-choice questions, end with exactly: "Answer: <LETTER>"
  4. Ensure your answer matches one of the provided options

  Write the complete final solution: